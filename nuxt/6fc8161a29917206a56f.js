(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{238:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAnBJREFUaAXtmrtKA1EQhrMqKFooARUVBO2VPIBiOgvBzsJC7NRWFGz0DcQH8DF8Au2tvFTeQLBRUBtvoMZvIJDdsHP2LDl7iezAsGd35sz//3POJtkkpVJh/7QDtVptHb/CxX5xGa+3hVyILuGaLeVeBMyPNPYScymgw2UxX61R37h5aIo150aeJyXg1YBsihmmJRxia3Tgs/gB/ohrJjHJkdykGmivVkjgK/gNHteumSBzsxECcAW/xFu1CwpU7NvmIBPADfyzVea++R9S0wG16BIA7fmAXQ93oxm0kAHbTdeMQ+pttkBRnwrQDP4TAuj6kmDM6EwaEa8xNI8o2EfGGT5pznQWvaXStOd5b6aKcV6+diiUFnnhLFiCaTSrFah3/55KZWM198FnSo6bVsF2BVYzIC/tkIYJtmq2AhbVCskHjNiRW4jt0w1HWcre5LmGIrxztcw2+gqL2qyAvMVnRV44C7b6McNGwIhUydhUDjYChjMmL/AqBxsBAzkQ0K9xsBGgzU3zuvpi0y4C1GYVAtTWpBQoViClRqswxQqorUkpUKxASo1WYdp+Bbo0aTwHDBHbwue1nBSvL8NHns72eS548uOqnzGYcEzinD85B+MTBFT9PEwCvkns9CfnYPyDgMCuMd0DLzkg3ExBHm0DZhKwTWboc2igQnonwkU4BUzdQpLFfdDDYTAwI7uTJ7bPZ3bwCSEbVyAOJqs1Rv5anDnkHtLVh5hzkklHgIfH+bVGcp010IkqCC3gNl+/S86CE1DXRSAmfzGIsnz/5QD2Vfw0RIVcq7psWmJ7EKJSewKfqhM+53jHTVurnzs5/AEz2or9KpoNowAAAABJRU5ErkJggg=="},239:function(t,e,n){"use strict";n(18);var o=n(39),c=n.n(o).a.create({baseURL:"http://match.bsdctw.net/api/"});c.interceptors.request.use((function(t){return window.localStorage.getItem("token")&&(t.headers={Authorization:"Bearer "+window.localStorage.getItem("token")}),t}),(function(t){return Promise.reject(t)})),c.interceptors.response.use((function(t){return t}),(function(t){return Promise.resolve(t)})),e.a=c},240:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAAAXNSR0IArs4c6QAAAS1JREFUaAXtl8EJwkAURLOoBKxA8GgLVmEj3i1ALcAmPHgVPFhCQPCsLWgTGufr5ibCkv/5WZmFz0ZYZ2fe5JKi4CIBEiABEkggUNf1KOF4d48iSIk5YGQtvJz2NS5GgBI6e8ws6g00dF00JAzmiGnWDg89FzNtL4VxhmkL0eT/bMYEq4Iom1GAaCLBZkywKoiyGQWIJhJsxgSrgiibUYBoIvFPzQQJA0oXzCTSumO/xuectiqEsJRAa7he5eT8h9exBJKvyxNmGg/esFeYZ/ydy3ZGQ5u3WQmFkU/nZskntbyK+S4EYKgs6mNTWdQEk2yKTTkS4OvnCD/pajaVhMvxMJtyhJ90NZtKwuV4+EtTS0c7OlfHUFvsD8xcR7UDKggz7IANWiABEiCBD4EXyIv1iOsRCl0AAAAASUVORK5CYII="},241:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAwCAYAAABT9ym6AAAAAXNSR0IArs4c6QAAAbpJREFUaAXt2bFOwzAQgOEGOiGBYOUJ2NiQkGCACTEwMLHwOognYYFHYESwMfIiZUQKvyFXISuhjuvz2VIsndxadu4+t2mTdjab2rQD0w5E7UDbtufEM3EddYDEi6hjTtwTT8Ru8OGZ/EC49kXcBC9UmEh+h3AAaVfBaVhxRCy6lWYY8vuIV8a2giFuIgtOCTNMh3ikl+YQO6MQMpmFJhjyulciDcIKo4LIjekQf0/s+LeTFO/3JDkh1M6ZLAhBaWGyIrQwJojUGFNEKkwRiHUxRSFiMQOIbTmeaU9xQR/NRSNkB1dhqkCswlSF+AdzC8S/7CjjnJCih3rvbcbTZXPXTnUgBEfBZ8vyfx981Ijw7+wcxexOUzZ3VE/BPuKdMbWr5lHFhU7uQfycE4wHfc+E5lGdN4SQpFVgViGqwIQiisaMRRSJiUUUhVkXUQSmQ/g/nkVfdnC8/B/NqREmr4wWIitGG5EFkwuhismNUMFYIZJirBHJMEDuCGmmt6cU4X/PHAhU+g150NPvdWNv9BdN0yx65mQZIvcLiS6JT2KTGPWvrrvLOybmLCyiUcs+cVhEMVMR0w5UtgPfXcWxw0IAaYEAAAAASUVORK5CYII="},242:function(t,e,n){t.exports=n.p+"img/300c8a9.png"},243:function(t,e,n){"use strict";var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-item"},[e("img",{attrs:{src:n(242)}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-title"},[e("div",{staticClass:"title"},[this._v("儲存")])])}],c={props:{title:{type:String,default:""},config:{type:Object,default:function(){return{bgNone:!1,fixedNone:!1,backPage:!1,backLink:"",closePage:!1,closeLink:"",notification:!1,editBtn:!1,saveBtn:!1}}},editFn:{type:Function,default:function(){}},saveFn:{type:Function,default:function(){}},backFn:{type:Function,default:function(link){link?this.$router.push(link):this.$router.go(-1)}},closeFn:{type:Function,default:function(link){link?this.$router.push(link):this.$router.go(-1)}}}},r=n(13),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header",class:{unbg:t.config.bgNone,unfixed:t.config.fixedNone},attrs:{id:"header"}},[o("div",{staticClass:"header-wrapper"},[o("div",{staticClass:"header-left"},[o("div",{staticClass:"page-btn"},[t.config.backPage?o("div",{staticClass:"page-btn__item",on:{click:function(e){return t.backFn(t.config.backLink)}}},[o("img",{attrs:{src:n(240)}})]):t.config.closePage?o("div",{staticClass:"page-btn__item",on:{click:function(e){return t.closeFn(t.config.closeLink)}}},[o("img",{attrs:{src:n(241)}})]):t._e()])]),o("div",{staticClass:"header-content"},[o("div",{staticClass:"title"},[t._v(t._s(t.title))])]),o("div",{staticClass:"header-right"},[o("div",{staticClass:"controll-btn"},[t.config.notification?o("div",{staticClass:"controll-btn__item"},[o("nuxt-link",{staticClass:"btn-item",attrs:{to:"/notification"}},[o("img",{attrs:{src:n(238)}})])],1):t.config.editBtn?o("div",{staticClass:"controll-btn__item",on:{click:t.editFn}},[t._m(0)]):t.config.saveBtn?o("div",{staticClass:"controll-btn__item",on:{click:t.saveFn}},[t._m(1)]):t._e()])])])])}),o,!1,null,null,null);e.a=component.exports},262:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return r}));var o=n(239),c=function(data){return o.a.post("login",data)},r=function(data){return o.a.post("loginotp",data)}},287:function(t,e,n){"use strict";var o={props:{title:{type:String,default:"成功"},content:{type:String,default:""},comfrimBtn:{type:String,default:"確定"},comfrimFn:{type:Function,default:function(){}}}},c=n(13),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-notification"},[n("div",{staticClass:"popup-block"},[n("div",{staticClass:"popup-content"},[n("div",{staticClass:"popup-content__title"},[t._v(t._s(t.title))]),n("div",{staticClass:"popup-content__content"},[t._t("content")],2),n("div",{staticClass:"popup-content__btn",on:{click:t.comfrimFn}},[t._v(t._s(t.comfrimBtn))])])])])}),[],!1,null,null,null);e.a=component.exports},306:function(t,e,n){t.exports=n.p+"img/2e8df90.png"},307:function(t,e,n){t.exports=n.p+"img/fa563a7.png"},361:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"result-item__icon"},[e("img",{attrs:{src:n(306)}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"result-item__icon"},[e("img",{attrs:{src:n(307)}})])}],c=(n(40),n(73),n(243)),r=n(287),l=n(262),v={middleware:"authenticated",layout:"nomenu",components:{Header:c.a,SinglePopup:r.a},data:function(){return{view:{validate:!0,result:!0,popup:!1},status:{time:60,submit:!1},form:{validate:[{value:""},{value:""},{value:""},{value:""}]},headerConfg:{fixedNone:!0,backPage:!0}}},mounted:function(){var t=this,e=setInterval((function(){0!==t.status.time?t.status.time--:clearInterval(e)}),1e3),n=window.localStorage.getItem("otp");if(n){var data=n.split("");this.form.validate.forEach((function(t,e){t.value=data[e]}))}},methods:{next_focus:function(t,e){var n=this.$refs.validate_input[e],o=this.$refs.validate_input[e+1],c=this.$refs.validate_input[e-1];8!==t.keyCode?e<this.form.validate.length-1?o.focus():n.blur():0!==e&&c.focus(),this.form.validate.every((function(t){return""!==t.value}))?this.status.submit=!0:this.status.submit=!1},clear_input:function(t){this.form.validate[t].value=""},validate_event:function(){var t=this,e=window.localStorage.getItem("notify-token");if(this.status.submit){var data={cell_phone:window.localStorage.getItem("phone"),otp:this.form.validate.map((function(t){return t.value})).join(""),fcm:e};Object(l.b)(data).then((function(e){var n={info:e.data.user,user_role:e.data.user.auth};t.$store.commit("user/userLogin",n),window.localStorage.setItem("token",e.data.token),window.localStorage.removeItem("phone"),window.localStorage.removeItem("otp")})).catch((function(e){console.log(e.response),t.view.result=!1})),this.view.validate=!1}},reValidate:function(){var t=this;if(0===this.status.time){var data={cell_phone:window.localStorage.getItem("phone")};Object(l.a)(data).then((function(e){window.localStorage.setItem("otp",e.data.otp),t.view.popup=!0})).catch((function(t){return t.response}))}},success_event:function(){var path=window.localStorage.getItem("last-page");window.localStorage.removeItem("last-page"),path?this.$router.replace(path):this.$router.replace("/user")},backValidate:function(){this.form.validate.forEach((function(t){t.value=""})),this.view.validate=!0},popup_event:function(){var t=this,e=window.localStorage.getItem("otp");if(e){var data=e.split("");this.form.validate.forEach((function(t,e){t.value=data[e]})),this.view.popup=!1}this.status.time=60;var n=setInterval((function(){0!==t.status.time?t.status.time--:clearInterval(n)}),1e3)}}},d=n(13),component=Object(d.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("Header",{attrs:{config:t.headerConfg}}),n("div",{staticClass:"login-validate-block"},[n("div",{staticClass:"step-block"},[n("div",{staticClass:"step completed"},[t._v("1")]),n("div",{staticClass:"step",class:{completed:!t.view.validate}},[t._v("2")])]),t.view.validate?n("div",{staticClass:"validate-block"},[n("div",{staticClass:"validate-title"},[t._v("請收取簡訊，並輸入驗證碼")]),n("div",{staticClass:"validate-input-list"},t._l(t.form.validate,(function(e,o){return n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],ref:"validate_input",refInFor:!0,attrs:{type:"number"},domProps:{value:e.value},on:{keyup:function(e){return t.next_focus(e,o)},keydown:function(e){return t.clear_input(o)},input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}})})),0),n("div",{staticClass:"validate-btn",class:{_resend:0==t.status.time},on:{click:t.reValidate}},[0!==t.status.time?n("div",{staticClass:"title"},[t._v(t._s(t.status.time)+" 秒後重寄簡訊")]):n("div",{staticClass:"title"},[t._v("重新寄出簡訊")])]),n("div",{staticClass:"validate-btn",class:{_check:t.status.submit},on:{click:t.validate_event}},[t._v("送出")])]):n("div",{staticClass:"result-block"},[t.view.result?n("div",{staticClass:"result-item"},[n("div",{staticClass:"result-item__title"},[t._v("驗證成功")]),t._m(0),n("div",{staticClass:"result-item__btn",on:{click:t.success_event}},[t._v("確定")])]):n("div",{staticClass:"result-item"},[n("div",{staticClass:"result-item__title"},[t._v("驗證失敗")]),t._m(1),n("div",{staticClass:"result-item__btn",on:{click:t.backValidate}},[t._v("確定")])])]),n("transition",{attrs:{name:"fade"}},[t.view.popup?n("div",{staticClass:"popup-block"},[n("SinglePopup",{attrs:{title:"重寄驗證碼",comfrimFn:t.popup_event},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",[t._v("請收取手機驗證碼！")])]},proxy:!0}],null,!1,943016740)})],1):t._e()])],1)],1)}),o,!1,null,null,null);e.default=component.exports}}]);